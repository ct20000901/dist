(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0631edd0"],{"16fa":function(t,e,i){},a393:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"back"},[i("v-app-bar",{attrs:{app:"",elevation:"2",color:"#333744",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(t){return this.$router.back()}}},[i("v-icon",{domProps:{innerHTML:t._s("mdi-arrow-left")}})],1),i("v-toolbar-title",[i("span",{staticClass:"pr-8"},[t._v("编辑科研成果")])]),i("v-spacer")],1),i("app-bar",{attrs:{"back-icon":"",title:"编辑科研成果","hide-user-menu":"",hideMessage:"",hideDemand:""}}),i("v-content",{staticStyle:{"min-height":"calc(100vh - 64px)"}},[i("v-container",[i("v-card",{staticClass:"mx-auto mb-12 mt-6",attrs:{"max-width":"1000","min-height":"2850"}},[i("v-form",{staticClass:"pl-8",attrs:{model:t.form}},[i("div",{staticClass:"pt-8"},[i("v-icon",[t._v("mdi-tag")]),i("span",{staticClass:"ml-3"},[t._v("项目名称")])],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{required:"",placeholder:"请输入项目名称，20个字以内",rules:[function(t){return!!t||"项目名称为必填项"}]},model:{value:t.form.entryname,callback:function(e){t.$set(t.form,"entryname",e)},expression:"form.entryname"}})],1),i("div",{staticClass:"pt-8"},[i("v-icon",[t._v("mdi-card-account-details")]),i("span",{staticClass:"ml-3"},[t._v("成果负责人")])],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{required:"",placeholder:"请输入成果负责人姓名",rules:[function(t){return!!t||"成果负责人姓名为必填项"}]},model:{value:t.form.charge,callback:function(e){t.$set(t.form,"charge",e)},expression:"form.charge"}}),i("v-text-field",{attrs:{required:"",placeholder:"请输入成果负责人职称信息",rules:[function(t){return!!t||"成果负责人职称信息为必填项"}]},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-clipboard-text")]),i("span",{staticClass:"ml-3"},[t._v("科研成果介绍")])],1),i("v-col",{attrs:{cols:"12",sm:"8"}},[i("v-textarea",{attrs:{filled:"",placeholder:"请输入科研成果简介，200字以内",rules:[function(t){return!!t||"项目名称为必填项"}]},model:{value:t.form.results,callback:function(e){t.$set(t.form,"results",e)},expression:"form.results"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-cube-scan")]),i("span",{staticClass:"ml-3"},[t._v("技术创新点")])],1),i("div",{staticStyle:{height:"610px"}},[i("quill-editor",{ref:"myQuillEditor",staticClass:"mr-8",staticStyle:{height:"500px"},attrs:{"max-height":"400",config:t.editorOption},model:{value:t.form.tecNew,callback:function(e){t.$set(t.form,"tecNew",e)},expression:"form.tecNew"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-elevation-rise")]),i("span",{staticClass:"ml-3"},[t._v("市场前景及应用")])],1),i("div",{staticStyle:{height:"610px"}},[i("quill-editor",{ref:"myQuillEditor",staticClass:"mr-8",staticStyle:{height:"500px"},attrs:{"max-height":"400",config:t.editorOption},model:{value:t.form.future,callback:function(e){t.$set(t.form,"future",e)},expression:"form.future"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-electron-framework")]),i("span",{staticClass:"ml-3"},[t._v("技术成熟度")])],1),i("v-radio-group",{attrs:{row:""},model:{value:t.form.maturity,callback:function(e){t.$set(t.form,"maturity",e)},expression:"form.maturity"}},[i("v-radio",{staticClass:"ml-4",attrs:{value:"概念验证",label:"概念验证"}}),i("v-radio",{staticClass:"ml-4",attrs:{value:"原理样机",label:"原理样机"}}),i("v-radio",{staticClass:"ml-4",attrs:{value:"工程样机",label:"工程样机"}}),i("v-radio",{staticClass:"ml-4",attrs:{value:"中试",label:"中试"}}),i("v-radio",{staticClass:"ml-4",attrs:{value:"产业化",label:"产业化"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-phone")]),i("span",{staticClass:"ml-3"},[t._v("技术成熟度")])],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{required:"",filled:"",label:"项目联系人姓名",placeholder:"请输入联系人姓名",rules:[function(t){return!!t||"联系人姓名为必填项"}]},model:{value:t.form.contacts,callback:function(e){t.$set(t.form,"contacts",e)},expression:"form.contacts"}}),i("v-text-field",{attrs:{required:"",filled:"",label:"项目联系人电话",placeholder:"请输入联系电话",rules:[function(t){return!!t||"联系人电话为必填项"}]},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}}),i("v-text-field",{attrs:{required:"",filled:"",label:"项目联系邮箱",placeholder:"请输入联系邮箱",rules:[function(t){return!!t||"联系人邮箱为必填项"}]},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}}),i("v-text-field",{attrs:{required:"",filled:"",label:"个人信息",placeholder:"请输入个人联系方式",rules:[function(t){return!!t||"个人信息为必填项"}]},model:{value:t.form.information,callback:function(e){t.$set(t.form,"information",e)},expression:"form.information"}})],1),i("div",{staticClass:"mt-5"},[i("v-icon",[t._v("mdi-file-document-edit")]),i("span",{staticClass:"ml-3"},[t._v("科研成果论文")])],1),i("el-upload",{staticClass:"upload-demo mt-5 mr-5",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),i("em",[t._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传pdf文件，且不超过20M ")])]),i("v-row",{staticClass:"mt-12 mb-12"},[i("div",{staticClass:"mr-12 ml-3"},[i("v-btn",{attrs:{width:"120px",depressed:"",large:"",color:"info",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.saveChanges()}}},[t._v("提交修改")])],1),i("div",{staticClass:"mr-12"},[i("v-btn",{staticClass:"white--text",attrs:{width:"120px",depressed:"",large:"",color:"#AAAAAA"},on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)])],1)],1)],1)],1),i("app-footer")],1)},r=[],o=(i("96cf"),i("1da1")),s=i("953d");const n={watcher:{},active:null,on:function(t,e){this.watcher[t]||(this.watcher[t]=e)},emit:function(t,e=1){this.active=this.watcher[t],1===e&&c()}};class l{constructor(t,e={}){this.id=Math.random(),this.quill=t,this.quill.id=this.id,this.config=e,this.file="",this.imgURL="",t.root.addEventListener("paste",this.pasteHandle.bind(this),!1),t.root.addEventListener("drop",this.dropHandle.bind(this),!1),t.root.addEventListener("dropover",(function(t){t.preventDefault()}),!1),this.cursorIndex=0,n.on(this.id,this)}pasteHandle(t){n.emit(this.quill.id,0);let e,i,a,r=t.clipboardData,o=0;if(r){if(e=r.items,!e)return;for(i=e[0],a=r.types||[];o<a.length;o++)if("Files"===a[o]){i=e[o];break}if(i&&"file"===i.kind&&i.type.match(/^image\//i)){this.file=i.getAsFile();let t=this;if(t.config.size&&t.file.size>=1024*t.config.size*1024)return void(t.config.sizeError&&t.config.sizeError());this.config.action}}}dropHandle(t){n.emit(this.quill.id,0);const e=this;t.preventDefault(),e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():(e.file=t.dataTransfer.files[0],this.config.action?e.uploadImg():e.toBase64())}toBase64(){const t=this,e=new FileReader;e.onload=e=>{t.imgURL=e.target.result,t.insertImg()},e.readAsDataURL(t.file)}uploadImg(){const t=this;t.quillLoading;let e=t.config,i=new FormData;i.append(e.name,t.file),e.editForm&&e.editForm(i);let a=new XMLHttpRequest;a.open("post",e.action,!0),e.headers&&e.headers(a),e.change&&e.change(a,i),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){let i=JSON.parse(a.responseText);t.imgURL=e.response(i),n.active.uploadSuccess(),t.insertImg(),t.config.success&&t.config.success()}else t.config.error&&t.config.error(),n.active.uploadError()},a.upload.onloadstart=function(t){n.active.uploading(),e.start&&e.start()},a.upload.onprogress=function(t){let e=(t.loaded/t.total*100|0)+"%";n.active.progress(e)},a.upload.onerror=function(t){n.active.uploadError(),e.error&&e.error()},a.upload.onloadend=function(t){e.end&&e.end()},a.send(i)}insertImg(){const t=n.active;t.quill.insertEmbed(n.active.cursorIndex,"image",t.imgURL),t.quill.update(),t.quill.setSelection(t.cursorIndex+1)}progress(t){t="[uploading"+t+"]",n.active.quill.root.innerHTML=n.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,t)}uploading(){let t=(n.active.quill.getSelection()||{}).index||n.active.quill.getLength();n.active.cursorIndex=t,n.active.quill.insertText(n.active.cursorIndex,"[uploading...]",{color:"red"},!0)}uploadError(){n.active.quill.root.innerHTML=n.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"[upload error]")}uploadSuccess(){n.active.quill.root.innerHTML=n.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"")}}function c(){let t=document.querySelector(".quill-image-input");null===t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.classList.add("quill-image-input"),t.style.display="none",t.addEventListener("change",(function(){let e=n.active;e.file=t.files[0],t.value="",e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():e.config.action?e.uploadImg():e.toBase64()})),document.body.appendChild(t)),t.click()}const d=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]];i("a753"),i("8096"),i("14e1");var u=i("4fbe");s["Quill"].register("modules/ImageExtend",l);var m={name:"SchoolEdit",components:{AppFooter:u["a"],quillEditor:s["quillEditor"]},props:["id"],watch:{id:function(){this.getSci()}},data:function(){return{loading:!1,content:null,editorOption:{placeholder:"请输入",theme:"snow",modules:{ImageExtend:{loading:!0,name:"img",size:3},toolbar:{container:d,handlers:{image:function(){n.emit(this.quill.id)}}}}},form:{id:this.id,entryname:"",tel:"",mail:"",position:"",information:"",charge:"",results:"",maturity:"",tecNew:null,future:null}}},methods:{clearInput:function(){this.form={}},getSci:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/api/school/readMySci?id="+t.id);case 2:if(i=e.sent,200==i.data.code){e.next=6;break}return t.$message.warning("抱歉，您无法编辑该科研成果！"),e.abrupt("return",!1);case 6:t.form=i.data.data.Sci;case 7:case"end":return e.stop()}}),e)})))()},saveChanges:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/api/school/updateSchool",t.form,{headers:{"Content-Type":"application/json"}});case 2:i=e.sent,200===i.data.code?(t.$message.success("修改科研成果内容成功！"),t.clearInput(),t.$router.push("/university/history")):(t.clearInput(),t.$message.error("修改科研成果内容失败！")),t.clearInput();case 5:case"end":return e.stop()}}),e)})))()},cancel:function(){this.clearInput(),this.$router.push("/university/history")}},mounted:function(){this.getSci()}},f=m,p=(i("f8cd"),i("2877")),v=i("6544"),h=i.n(v),g=i("40dc"),b=i("5bc1"),x=i("8336"),C=i("b0af"),w=i("62ad"),q=i("a523"),k=i("a75b"),y=i("4bd4"),_=i("132d"),E=i("67b6"),I=i("43a6"),L=i("0fd9"),S=i("2fa4"),$=i("8654"),z=i("a844"),V=i("2a7f"),T=Object(p["a"])(f,a,r,!1,null,"a0e74b1a",null);e["default"]=T.exports;h()(T,{VAppBar:g["a"],VAppBarNavIcon:b["a"],VBtn:x["a"],VCard:C["a"],VCol:w["a"],VContainer:q["a"],VContent:k["a"],VForm:y["a"],VIcon:_["a"],VRadio:E["a"],VRadioGroup:I["a"],VRow:L["a"],VSpacer:S["a"],VTextField:$["a"],VTextarea:z["a"],VToolbarTitle:V["b"]})},f8cd:function(t,e,i){"use strict";var a=i("16fa"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-0631edd0.1924baee.js.map