(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-775a7f8b"],{"100d":function(e,r,t){"use strict";var a=t("7534");t.n(a).a},"242b":function(e,r,t){"use strict";t.r(r);t("96cf");var a=t("1da1"),n=t("cba5"),s=t("4fbe"),o={name:"PersonalCenter",components:{AppBar:n.a,AppFooter:s.a},data:function(){return{form:{id:"",username:"",tel:"",mail:"",address:""},editUserFormRules:{mail:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{validator:function(e,r,t){if(/^[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*@[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*\.[a-z]{2,}$/.test(r))return t();t(new Error("请输入合法邮箱"))},trigger:"blur"}],tel:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:function(e,r,t){if(/^1[34578]\d{9}$/.test(r))return t();t(new Error("请输入合法的手机号码"))},trigger:"blur"}],address:[{required:!0,message:"请输入高校所在地址",trigger:"blur"}]}}},methods:{getUserInfo:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("/api/user/thisuser");case 2:if(200!=(t=r.sent).data.code){r.next=11;break}e.form.id=t.data.data.id,e.form.username=t.data.data.username,e.form.tel=t.data.data.tel,e.form.mail=t.data.data.mail,e.form.address=t.data.data.address,r.next=12;break;case 11:return r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r)})))()},changeUserInfo:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.$refs.editUserFormRef.validate(function(){var r=Object(a.a)(regeneratorRuntime.mark((function r(t){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$http.post("/api/school/updateSchool",e.form,{headers:{"Content-Type":"application/json"}});case 4:200===r.sent.data.code?e.$message.success("用户信息修改成功！"):e.$message.error("用户信息修改失败");case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}},mounted:function(){this.getUserInfo()}},i=(t("100d"),t("2877")),u=t("6544"),l=t.n(u),c=t("b0af"),m=t("99d9"),d=t("62ad"),f=t("a523"),p=t("a75b"),b=Object(i.a)(o,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"back"},[t("app-bar",{attrs:{"back-icon":"",title:"我的信息","hide-user-menu":"",hideMessage:"",hideDemand:""}}),t("v-content",{staticStyle:{"min-height":"calc(100vh - 64px)"}},[t("v-container",[t("v-card",{staticClass:"mx-auto mt-12",attrs:{"min-height":"400","max-width":"800"}},[t("v-card-title",[e._v("基本信息")]),t("div",{staticClass:"pl-10"},[t("el-form",{ref:"editUserFormRef",attrs:{"label-position":"left","label-width":"80px",model:e.form,rules:e.editUserFormRules}},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("el-form-item",{attrs:{label:"所属大学"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"联系方式",prop:"tel"}},[t("el-input",{on:{blur:function(r){return e.changeUserInfo()}},model:{value:e.form.tel,callback:function(r){e.$set(e.form,"tel",r)},expression:"form.tel"}})],1),t("el-form-item",{attrs:{label:"联系邮箱",prop:"mail"}},[t("el-input",{on:{blur:function(r){return e.changeUserInfo()}},model:{value:e.form.mail,callback:function(r){e.$set(e.form,"mail",r)},expression:"form.mail"}})],1)],1),t("v-col",{attrs:{cols:"12",sm:"8"}},[t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{on:{blur:function(r){return e.changeUserInfo()}},model:{value:e.form.address,callback:function(r){e.$set(e.form,"address",r)},expression:"form.address"}})],1)],1)],1)],1)],1)],1)],1),t("app-footer")],1)}),[],!1,null,"3397ce9c",null);r.default=b.exports;l()(b,{VCard:c.a,VCardTitle:m.c,VCol:d.a,VContainer:f.a,VContent:p.a})},7534:function(e,r,t){}}]);