{"version":3,"sources":["webpack:///./src/views/home/permission.vue?995c","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/home/permission.vue?9cf3","webpack:///src/views/home/permission.vue","webpack:///./src/views/home/permission.vue?603b","webpack:///./src/views/home/permission.vue"],"names":["$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","dialogFormVisible","_v","staticStyle","changeRole","model","value","callback","$$v","role","expression","_l","item","index","key","text","permissionList","changePermission","_s","ref","roleList","scopedSlots","_u","fn","scope","logOut","$index","row","closeForm","roleForm","rules","$set","nativeOn","type","indexOf","_k","keyCode","submitForm","slot","commitRole","staticRenderFns","components","card","data","validateUsrname","Error","validatePass","username","password","rolePermission","roleMap","permissionMap","allUser","computed","methods","$refs","roleform","resetFields","$axios","url","params","userId","res","code","message","msg","validate","valid","method","transformRequest","headers","filterHandler","property","val","permission","getPermission","getUser","created","$openLoading","Promise","all","then","setTimeout","component"],"mappings":"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","file":"js/chunk-2ab013e6.2cd53220.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=style&index=0&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"permission-wrapper\"},[_c('card',{attrs:{\"title\":\"权限管理\"}},[_c('el-button',{staticClass:\"card-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"添加用户\")]),_vm._v(\" 角色选择:\"),_c('el-radio-group',{staticStyle:{\"margin-left\":\"20px\"},on:{\"change\":_vm.changeRole},model:{value:(_vm.role),callback:function ($$v) {_vm.role=$$v},expression:\"role\"}},_vm._l((_vm.roleMap),function(item,index){return _c('el-radio-button',{key:index,attrs:{\"label\":item.text}})}),1),_c('el-checkbox-group',{attrs:{\"disabled\":_vm.role === '老板'},model:{value:(_vm.permissionList),callback:function ($$v) {_vm.permissionList=$$v},expression:\"permissionList\"}},_vm._l((_vm.permissionMap),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.value,\"border\":\"\"},on:{\"change\":function($event){return _vm.changePermission(item.value)}}},[_vm._v(_vm._s(item.text))])}),1),_c('el-table',{ref:\"filterTable\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"data\":_vm.roleList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"role\",\"label\":\"角色\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.logOut(scope.$index, scope.row)}}},[_vm._v(\"注销\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"新增用户\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"close\":_vm.closeForm}},[_c('el-form',{ref:\"roleform\",staticClass:\"permission-form\",attrs:{\"model\":_vm.roleForm,\"label-position\":\"left\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"用户身份:\",\"label-width\":\"90px\",\"prop\":\"type\"}},[_c('el-select',{model:{value:(_vm.roleForm.role),callback:function ($$v) {_vm.$set(_vm.roleForm, \"role\", $$v)},expression:\"roleForm.role\"}},_vm._l((_vm.roleMap),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.text,\"value\":item.text}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"用户名:\",\"label-width\":\"90px\",\"prop\":\"username\"}},[_c('el-input',{staticClass:\"form-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.roleForm.username),callback:function ($$v) {_vm.$set(_vm.roleForm, \"username\", $$v)},expression:\"roleForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码:\",\"label-width\":\"90px\",\"prop\":\"password\"}},[_c('el-input',{staticClass:\"form-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入密码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm($event)}},model:{value:(_vm.roleForm.password),callback:function ($$v) {_vm.$set(_vm.roleForm, \"password\", $$v)},expression:\"roleForm.password\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.commitRole}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"permission-wrapper\">\n    <card title=\"权限管理\">\n      <el-button\n        class=\"card-btn\"\n        size=\"small\"\n        type=\"primary\"\n        @click=\"dialogFormVisible = true\"\n        >添加用户</el-button\n      >\n      角色选择:<el-radio-group\n        v-model=\"role\"\n        style=\"margin-left:20px\"\n        @change=\"changeRole\"\n      >\n        <el-radio-button\n          v-for=\"(item, index) in roleMap\"\n          :key=\"index\"\n          :label=\"item.text\"\n        ></el-radio-button>\n      </el-radio-group>\n      <el-checkbox-group v-model=\"permissionList\" :disabled=\"role === '老板'\">\n        <el-checkbox\n          :label=\"item.value\"\n          v-for=\"(item, index) in permissionMap\"\n          :key=\"index\"\n          border\n          @change=\"changePermission(item.value)\"\n          >{{ item.text }}</el-checkbox\n        >\n      </el-checkbox-group>\n\n      <el-table\n        ref=\"filterTable\"\n        :data=\"roleList\"\n        border\n        style=\"margin-top:20px\"\n      >\n        <el-table-column prop=\"role\" label=\"角色\" align=\"center\">\n        </el-table-column>\n        <el-table-column prop=\"username\" label=\"用户名\" align=\"center\">\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" @click=\"logOut(scope.$index, scope.row)\"\n              >注销</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-dialog\n        title=\"新增用户\"\n        :visible.sync=\"dialogFormVisible\"\n        @close=\"closeForm\"\n      >\n        <el-form\n          :model=\"roleForm\"\n          label-position=\"left\"\n          class=\"permission-form\"\n          ref=\"roleform\"\n          :rules=\"rules\"\n        >\n          <el-form-item label=\"用户身份:\" label-width=\"90px\" prop=\"type\">\n            <el-select v-model=\"roleForm.role\">\n              <el-option\n                v-for=\"item in roleMap\"\n                :key=\"item.value\"\n                :label=\"item.text\"\n                :value=\"item.text\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"用户名:\" label-width=\"90px\" prop=\"username\">\n            <el-input\n              v-model=\"roleForm.username\"\n              autocomplete=\"off\"\n              class=\"form-input\"\n              placeholder=\"请输入用户名\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码:\" label-width=\"90px\" prop=\"password\">\n            <el-input\n              v-model=\"roleForm.password\"\n              autocomplete=\"off\"\n              class=\"form-input\"\n              placeholder=\"请输入密码\"\n              @keyup.enter.native=\"submitForm\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"commitRole\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </card>\n  </section>\n</template>\n\n<script>\nimport card from \"../../components/card\";\nexport default {\n  components: {\n    card\n  },\n  data() {\n    var validateUsrname = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      } else {\n        callback();\n      }\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      rules: {\n        username: [{ validator: validateUsrname, trigger: \"blur\" }],\n        password: [{ validator: validatePass, trigger: \"blur\" }]\n      },\n      permissionList: [],\n      rolePermission: [],\n      role: \"\",\n      roleMap: [\n        { text: \"老板\", value: \"0\" },\n        { text: \"总负责人\", value: \"1\" },\n        { text: \"客服人员\", value: \"2\" },\n        { text: \"仓库管理\", value: \"3\" }\n      ],\n      permissionMap: [\n        { text: \"商品管理\", value: \"0\" },\n        { text: \"订单管理\", value: \"1\" },\n        { text: \"运费管理\", value: \"2\" },\n        { text: \"库存管理\", value: \"3\" },\n        { text: \"会员管理\", value: \"4\" },\n        { text: \"机构管理\", value: \"5\" },\n        { text: \"历史数据分析\", value: \"6\" }\n      ],\n      allUser: [],\n      dialogFormVisible: false,\n      roleForm: {\n        role: \"老板\",\n        username: \"\",\n        password: \"\"\n      }\n    };\n  },\n  computed: {\n    roleList() {\n      return this.allUser.filter(item => {\n        return item.role == this.role;\n      });\n    }\n  },\n  methods: {\n    closeForm() {\n      this.$refs.roleform.resetFields();\n    },\n    logOut(index, row) {\n      this.$axios({\n        url: \"/deleteUser\",\n        params: {\n          userId: row.userId\n        }\n      }).then(res => {\n        if (res.data.code == 200) {\n          this.$message({\n            type: \"success\",\n            message: \"注销成功\"\n          });\n          this.getUser();\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    commitRole() {\n      this.dialogFormVisible = true;\n      this.$refs[\"roleform\"].validate(valid => {\n        if (valid) {\n          this.$axios({\n            url: \"/addUser\",\n            method: \"post\",\n            transformRequest: [\n              function(data) {\n                return JSON.stringify(data);\n              }\n            ],\n            data: this.roleForm,\n            headers: { \"Content-Type\": \"application/json\" }\n          }).then(res => {\n            if (res.data.code == 200) {\n              this.$message({\n                type: \"success\",\n                message: \"添加用户成功\"\n              });\n              this.getUser();\n              this.dialogFormVisible = false;\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.data.msg\n              });\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n    changeRole() {\n      for (let item of this.roleMap) {\n        if (item.text == this.role) {\n          this.permissionList = this.rolePermission[item.value];\n        }\n      }\n    },\n    changePermission(val) {\n      if (this.permissionList.indexOf(val) !== -1) {\n        this.$axios({\n          url: \"/addPerm\",\n          params: {\n            permission: val,\n            role: this.role\n          }\n        }).then(res => {\n          this.getPermission();\n        });\n      } else {\n        this.$axios({\n          url: \"/deletePerm\",\n          params: {\n            permission: val,\n            role: this.role\n          }\n        }).then(res => {\n          this.getPermission();\n        });\n      }\n    },\n    getPermission() {\n      return this.$axios({\n        url: \"/getPermByRole\"\n      })\n        .then(res => {\n          if (res.data.code == 200) {\n            this.rolePermission = [];\n            for (let item of this.roleMap) {\n              this.rolePermission.push(res.data.data[item.text]);\n            }\n            this.changeRole();\n          } else {\n            this.$message({\n              type: \"error\",\n              message: \"获取信息错误\"\n            });\n          }\n        })\n        .catch(err => {\n          this.$message({\n            type: \"error\",\n            message: \"获取信息失败\"\n          });\n        });\n    },\n    getUser() {\n      return this.$axios({\n        url: \"/getAllUserInfo\"\n      })\n        .then(res => {\n          if (res.data.code == 200) {\n            this.allUser = res.data.data;\n          } else {\n            this.$message({\n              type: \"error\",\n              message: \"获取信息错误\"\n            });\n          }\n        })\n        .catch(err => {\n          this.$message({\n            type: \"error\",\n            message: \"获取信息失败\"\n          });\n        });\n    }\n  },\n  created() {\n    this.$openLoading();\n    this.role = this.roleMap[0].text;\n    Promise.all([this.getPermission(), this.getUser()]).then(res => {\n      this.changeRole();\n      setTimeout(() => {\n        this.$openLoading().close();\n      }, 200);\n    });\n  }\n};\n</script>\n\n<style lang=\"less\">\n.permission-wrapper {\n  .el-checkbox.is-bordered {\n    margin-top: 20px;\n  }\n  .el-checkbox.is-bordered + .el-checkbox.is-bordered {\n    margin-left: 0;\n  }\n\n  .permission-form {\n    margin: 0 auto;\n    width: 76%;\n\n    .el-select {\n      .el-input {\n        width: 100% !important;\n      }\n    }\n    .form-input {\n      margin: 0 auto;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./permission.vue?vue&type=template&id=3bd2df80&\"\nimport script from \"./permission.vue?vue&type=script&lang=js&\"\nexport * from \"./permission.vue?vue&type=script&lang=js&\"\nimport style0 from \"./permission.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}