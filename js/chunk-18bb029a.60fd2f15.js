(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18bb029a"],{"0e88":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"vipInfoTable"},e._l(e.rowCount,(function(t){return a("tr",{key:t},[a("td",{staticClass:"column"},[e._v(e._s(e.tableData[2*t-2].key))]),a("td",[e._v(e._s(e.tableData[2*t-2].value))]),a("td",{staticClass:"column"},[e._v(" "+e._s(void 0!==e.tableData[2*t-1]?e.tableData[2*t-1].key:"")+" ")]),a("td",[e._v(" "+e._s(void 0!==e.tableData[2*t-1]?e.tableData[2*t-1].value:"")+" ")])])})),0)},o=[],i={props:["tableData"],computed:{rowCount:function(){return Math.ceil(this.tableData.length/2)}}},s=i,n=(a("f437"),a("2877")),l=Object(n["a"])(s,r,o,!1,null,null,null);t["a"]=l.exports},"109b":function(e,t,a){"use strict";var r=a("710e"),o=a.n(r);o.a},"159b":function(e,t,a){var r=a("da84"),o=a("fdbc"),i=a("17c2"),s=a("9112");for(var n in o){var l=r[n],c=l&&l.prototype;if(c&&c.forEach!==i)try{s(c,"forEach",i)}catch(d){c.forEach=i}}},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,o=a("a640"),i=a("ae40"),s=o("forEach"),n=i("forEach");e.exports=s&&n?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,a){"use strict";var r=a("23e7"),o=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"68c0":function(e,t,a){},"710e":function(e,t,a){},cfc2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"checkorder-wrapper"},[a("card",{attrs:{title:"会员信息"}},[a("section",[a("el-button",{staticClass:"card-btn",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.$router.back(-1)}}},[e._v("返回")]),a("vipInfo",{attrs:{tableData:e.vipData}})],1)]),a("card",{attrs:{title:"订单详情"}},[a("el-button",{staticClass:"card-btn",attrs:{size:"small",type:"primary"},on:{click:e.editOrder}},[e._v(e._s(e.editFlag?"完成":"编辑"))]),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{"show-header":!1,data:e.orderData,border:"","span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{width:"180",prop:"label"}}),a("el-table-column",{attrs:{prop:"valueLeft",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:5==t.$index&&e.editFlag,expression:"scope.$index == 5 && editFlag"}],attrs:{placeholder:"请输入内容",size:"medium"},model:{value:t.row.valueLeft,callback:function(a){e.$set(t.row,"valueLeft",a)},expression:"scope.row.valueLeft"}}),6==t.$index?a("el-upload",{ref:"upload",class:e.uploadDisabled,attrs:{action:e.imgUploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccesspic,"file-list":e.picFile,"list-type":"picture-card",limit:1}},[a("i",{staticClass:"el-icon-plus "})]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:t.$index<5||t.$index>6||!e.editFlag&&6!==t.$index,expression:"\n              scope.$index < 5 ||\n                scope.$index > 6 ||\n                (!editFlag && scope.$index !== 6)\n            "}],staticStyle:{"line-height":"36px"}},[e._v(e._s(t.row.valueLeft))])]}}])}),a("el-table-column",{attrs:{prop:"valueRight"}})],1)],1)],1)},o=[],i=(a("4160"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("b85c")),s=a("ff86"),n=a("0e88"),l={components:{card:s["a"],vipInfo:n["a"]},data:function(){return{imgUploadUrl:"http://212.64.87.193:8080/back/product/uploadImage",editFlag:!1,imgPreviewUrl:"",picFile:[],vipData:[{key:"手机号",value:""},{key:"姓名",value:""},{key:"床位",value:""},{key:"宝宝生日",value:""},{key:"宝宝体重",value:""},{key:"地区",value:""},{key:"默认地址",value:""}],userInfo:{},orderInfo:{},uid:0,oid:0,orderStatus:["已完成","待收货","待发货"],orderData:[{label:"订单号",valueLeft:""},{label:"购买商品",valueLeft:""},{label:"物流公司",valueLeft:""},{label:"金额",valueLeft:""},{label:"订单状态",valueLeft:""},{label:"运单号",valueLeft:""},{label:"电子发票",valueLeft:""}],orderMap:["oid","opLinks","type","money","status","waybill","invoice"]}},computed:{uploadDisabled:function(){return!this.picFile.length&&this.editFlag?"":"disabled"}},methods:{objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t<=6){if(1===a)return[1,2];if(2===a)return[0,0]}else if(0===a)return t%(this.orderData.length-7)===0?{rowspan:this.orderData.length-7,colspan:1}:{rowspan:0,colspan:0}},editOrder:function(){var e=this;if(this.editFlag){for(var t=4;t<7;t++)this.orderInfo[this.orderMap[t]]=this.orderData[t].valueLeft;console.log(this.orderInfo),this.$axios({url:"/back/order/order/updateOrder",method:"post",transformRequest:[function(e){return JSON.stringify(e)}],data:this.orderInfo,headers:{"Content-Type":"application/json"}}).then((function(t){200==t.data.code?(e.getOrderInfo(),e.$message({type:"success",message:"修改订单成功"})):e.$message({type:"error",message:t.data.msg})}))}this.editFlag=!this.editFlag},handleRemove:function(e,t){var a=this;this.$axios({url:"/back/product/deleteImage",params:{fileUrl:e.url}}).then((function(e){200==e.data.code?(a.orderData[6].valueLeft="",a.picFile=[],a.$message({type:"success",message:"移除成功"})):a.$message({type:"error",message:"移除失败"})}))},handlePreview:function(e){this.imgPreviewUrl=e.url,this.imgPreview=!0},handleSuccesspic:function(e,t,a){this.orderData[6].valueLeft=e.data,this.picFile[0]=e.data,console.log(this.picFile)},getUserInfo:function(){var e=this;this.$axios({url:"/back/user/getUser",params:{uId:this.uid}}).then((function(t){200==t.data.code?e.vipDataFormmate(t.data.data):e.$message({type:"error",message:t.data.msg})}))},vipDataFormmate:function(e){var t=["tel","uname","bed","birthday","weight","address"];this.vipData.forEach((function(a,r,o){if(r<5)if(3===r){var i=new Date(e[t[r]]);o[r].value=i.getFullYear()+"年"+(i.getMonth()+1)+"月"+i.getDate()+"日"}else o[r].value=e[t[r]];else{var s=e[t[5]].province+e[t[5]].city;s||(s=""),o[r].value=5===r?s:e[t[5]].address}}))},getOrderInfo:function(){var e=this;this.$axios({url:"/back/order/order/getOrder",params:{oId:this.oid}}).then((function(t){if(200==t.data.code){e.orderInfo=t.data.data,e.orderData=e.$options.data().orderData;for(var a=0;a<e.orderMap.length;a++)if(1!==a)e.orderData[a].valueLeft=e.orderInfo[e.orderMap[a]];else{var r,o=Object(i["a"])(e.orderInfo.opLinks);try{for(o.s();!(r=o.n()).done;){var s=r.value,n={label:"评价",valueLeft:s.pName,valueRight:s.comment?s.comment:"无"};e.orderData[1].valueLeft+=s.pName+"\n",e.orderData.push(n)}}catch(l){o.e(l)}finally{o.f()}}e.picFile=e.orderData[6].valueLeft?[{name:"0",url:"http://"+e.orderData[6].valueLeft}]:[]}else e.$message({type:"error",message:"订单信息获取失败"})}))}},created:function(){var e=this;this.$openLoading(),this.uid=this.$route.query.uid,this.oid=this.$route.query.oid,Promise.all([this.getOrderInfo(),this.getUserInfo()]).then((function(t){setTimeout((function(){e.$openLoading().close()}),200)}))}},c=l,d=(a("109b"),a("2877")),u=Object(d["a"])(c,r,o,!1,null,null,null);t["default"]=u.exports},f437:function(e,t,a){"use strict";var r=a("68c0"),o=a.n(r);o.a}}]);
//# sourceMappingURL=chunk-18bb029a.60fd2f15.js.map