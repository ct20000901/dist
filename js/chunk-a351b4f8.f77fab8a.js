(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a351b4f8"],{"0522":function(t,e,a){},"27b6":function(t,e,a){"use strict";var i=a("a0f2"),s=a.n(i);s.a},9889:function(t,e,a){"use strict";var i=a("0522"),s=a.n(i);s.a},a0f2:function(t,e,a){},e8872:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mechanism-wrapper"},[a("card",{attrs:{title:"机构管理"}},[a("el-button",{staticClass:"card-btn",attrs:{size:"small",type:"primary"},on:{click:t.addMechanism}},[t._v("新增")]),a("el-table",{attrs:{data:t.hospitalList,border:""}},[a("el-table-column",{attrs:{prop:"hid",align:"center",width:"50",label:"编号"}}),a("el-table-column",{attrs:{label:"机构名称",align:"center",prop:"hname"}}),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"principal"}}),a("el-table-column",{attrs:{label:"负责人联系方式",align:"center",prop:"ptel"}}),a("el-table-column",{attrs:{label:"对应二维码",align:"center",prop:"url"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticClass:"QR-wrapper",attrs:{src:t.row.qcode?"http://"+t.row.qcode:"",fit:"fit"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"comment"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.editMechanism(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteMechanism(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"20px 0 0 30px"},attrs:{"current-page":t.currentPage,"page-size":t.PageSize,layout:"total, prev, pager, next,jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增机构",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",staticClass:"mechanism-form",attrs:{model:t.hospital,"label-position":"left"}},[a("el-form-item",{attrs:{label:"机构名称:","label-width":"90px"}},[a("el-input",{staticClass:"form-input",attrs:{autocomplete:"off"},model:{value:t.hospital.hname,callback:function(e){t.$set(t.hospital,"hname",e)},expression:"hospital.hname"}})],1),a("el-form-item",{attrs:{label:"机构负责人:","label-width":"90px"}},[a("el-input",{staticClass:"form-input",attrs:{autocomplete:"off"},model:{value:t.hospital.principal,callback:function(e){t.$set(t.hospital,"principal",e)},expression:"hospital.principal"}})],1),a("el-form-item",{attrs:{label:"联系方式:","label-width":"90px"}},[a("el-input",{staticClass:"form-input",attrs:{autocomplete:"off"},model:{value:t.hospital.ptel,callback:function(e){t.$set(t.hospital,"ptel",e)},expression:"hospital.ptel"}})],1),a("el-form-item",{attrs:{label:"备注:","label-width":"90px"}},[a("el-input",{staticClass:"form-input",attrs:{autocomplete:"off",type:"textarea"},model:{value:t.hospital.comment,callback:function(e){t.$set(t.hospital,"comment",e)},expression:"hospital.comment"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitHospital()}}},[t._v("确 定")])],1)],1)],1)},s=[],l=a("ff86"),n={components:{card:l["a"]},data:function(){return{hospital:{hname:"",principal:"",ptel:"",comment:""},hospitalList:[],dialogFormVisible:!1,currentPage:1,PageSize:10,totalCount:0,type:0}},methods:{addMechanism:function(){this.dialogFormVisible=!0,this.hospital=this.$options.data().hospital,this.type=0},editMechanism:function(t,e){this.hospital=Object.assign({},e),this.type=1,this.dialogFormVisible=!0},deleteMechanism:function(t,e){var a=this;this.$confirm("确认删除此机构?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios({url:"/deleteHospital",params:{id:e.hid}}).then((function(t){200==t.data.code?(a.$message({type:"success",message:"删除成功!"}),a.getHospital()):a.$message({type:"error",message:"机构信息获取失败"})}))}))},submitHospital:function(){var t=this,e=this.type?"/updateHospital":"/addHospital";this.$axios({url:e,method:"post",transformRequest:[function(t){return JSON.stringify(t)}],data:this.hospital,headers:{"Content-Type":"application/json"}}).then((function(e){200==e.data.code?(t.$message({type:"success",message:t.type?"修改机构信息成功":"添加机构成功"}),t.getHospital()):t.$message({type:"error",message:t.type?"修改机构信息失败":"添加机构失败"}),t.dialogFormVisible=!1})).catch((function(e){t.$message({type:"error",message:e})}))},handleCurrentChange:function(t){this.currentPage=t,this.getHospital()},getHospital:function(){var t=this;return this.$axios({url:"/getAllHospital",params:{page:this.currentPage}}).then((function(e){200==e.data.code?(t.PageSize=e.data.data.pageSize,t.totalCount=e.data.data.total,t.hospitalList=e.data.data.list):t.$message({type:"error",message:"机构信息获取失败"})})).catch((function(e){t.$message({type:"error",message:"订单信息获取失败"})}))}},created:function(){var t=this;this.$openLoading(),this.getHospital().then(setTimeout((function(){t.$openLoading().close()}),200))}},o=n,r=(a("27b6"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports},ff86:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"card-warpper"},[a("header",{staticClass:"card-header"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))])]),a("div",{staticClass:"card-content"},[t._t("default")],2)])},s=[],l={props:{title:{type:String}}},n=l,o=(a("9889"),a("2877")),r=Object(o["a"])(n,i,s,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-a351b4f8.f77fab8a.js.map