(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79a42572"],{"0522":function(t,e,a){},1148:function(t,e,a){"use strict";var i=a("a691"),n=a("1d80");t.exports="".repeat||function(t){var e=String(n(this)),a="",r=i(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},"26c1":function(t,e,a){},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"7db0":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").find,r=a("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},"95d6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"commodity-wrapper"},[a("card",{attrs:{title:"商品类别管理"}},[a("el-button",{staticClass:"card-btn",attrs:{size:"small",type:"primary"},on:{click:t.editTag}},[t._v(t._s(t.closeFlag?"完成":"编辑"))]),a("div",{staticClass:"tag-wrapper"},[t._l(t.typeTags,(function(e){return a("el-tag",{key:e.tid,attrs:{closable:t.closeFlag,"disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e.tname)+" ")])})),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t.closeFlag?a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("增加类别")]):t._e()],2)],1),a("card",{attrs:{title:"首页滚动介绍图管理"}},[a("el-upload",{ref:"upload",attrs:{action:t.imgUploadUrl,"list-type":"picture-card","on-success":t.handleSuccesspic,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.picList,multiple:!1}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.imgPreview},on:{"update:visible":function(e){t.imgPreview=e}}},[a("img",{attrs:{width:"100%",src:t.imgPreviewUrl,alt:""}})])],1),a("card",{attrs:{title:"商品管理"}},[a("el-button",{staticClass:"card-btn",attrs:{size:"small",type:"primary"},on:{click:t.addCommodity}},[t._v("新增")]),a("el-table",{attrs:{data:t.commodityList,border:""}},[a("el-table-column",{attrs:{label:"商品名称",prop:"pName",align:"center"}}),a("el-table-column",{attrs:{label:"商品价格",prop:"price",align:"center",width:"160",formatter:t.priceFormatter}}),a("el-table-column",{attrs:{label:"商品类别",prop:"type",align:"center",width:"140",formatter:t.typeFormatter}}),a("el-table-column",{attrs:{label:"适用年龄段",align:"center",formatter:t.yearFormatter}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.editCommodity(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteCommodity(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"20px 0 0 30px"},attrs:{"current-page":t.currentPage,"page-size":t.PageSize,layout:"total, prev, pager, next,jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],r=(a("7db0"),a("d81d"),a("b0c0"),a("a9e3"),a("b680"),a("ff86")),s={components:{card:r["a"]},data:function(){return{inputVisible:!1,inputValue:"",closeFlag:!1,imgUploadUrl:"https://www.ymxjkx.com/api/back/product/uploadImage",imgPreviewUrl:"",imgPreview:!1,picList:[],commodityList:[],currentPage:1,PageSize:10,totalCount:0}},computed:{typeTags:{get:function(){return this.$store.state.typelist},set:function(t){this.$store.state.typelist=t}}},methods:{handleClose:function(t){var e=this;this.$axios({url:"/back/product/deleteType",params:{id:this.typeTags.find((function(e){return e.tid==t.tid})).tid}}).then((function(t){200==t.data.code?e.$store.dispatch("getTypeList"):e.$message({type:"error",message:"删除失败"})}))},handleSuccesspic:function(t,e,a){var i=this;this.$axios({url:"/back/product/addMainImg",params:{imgUrl:t.data}}).then((function(t){200==t.data.code?i.$message({type:"success",message:"轮播图上传成功"}):i.$message({type:"error",message:"添加轮播图失败"})}))},getMainImg:function(){var t=this;this.$axios({url:"/back/product/getAllMainImg"}).then((function(e){200==e.data.code?t.picList=e.data.data.map((function(t){return{name:t.id,url:"http://"+t.imageUrl}})):t.$message({type:"error",message:"获取轮播图失败"})}))},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},getTag:function(){var t=this;this.$axios({url:"/back/product/getAllType"}).then((function(e){200==e.data.code?t.typeTags=e.data.data:t.$message({type:"error",message:"错误"})}))},handleInputConfirm:function(){var t=this;this.inputValue&&this.$axios({url:"/back/product/addType",params:{type:this.inputValue}}).then((function(e){200==e.data.code?t.$store.dispatch("getTypeList"):t.$message({type:"error",message:"添加失败"})})),this.inputVisible=!1,this.inputValue=""},editTag:function(){this.closeFlag=!this.closeFlag},handleRemove:function(t,e){var a=this;this.$axios({url:"/back/product/deleteMainImg",params:{id:t.name}}).then((function(e){200==e.data.code&&a.$axios({url:"/back/product/deleteImage",params:{fileUrl:t.url}}).then((function(t){200==t.data.code?a.$message({type:"success",message:"移除成功"}):a.$message({type:"error",message:"移除失败"})}))}))},handlePreview:function(t){this.imgPreviewUrl=t.url,this.imgPreview=!0},editCommodity:function(t,e){this.$store.commit("setProduct",e),this.$router.push({name:"editcommodity",query:{pid:e.pid}})},deleteCommodity:function(t,e){var a=this;this.$confirm("确认删除此商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios({url:"/back/product/deleteProduct",params:{id:e.pid}}).then((function(t){200==t.data.code?(a.$message({type:"success",message:"删除成功!"}),a.getProduct()):a.$message({type:"error",message:"商品信息获取失败"})}))}))},addCommodity:function(){this.$router.push({name:"editcommodity"})},priceFormatter:function(t,e){return Number(t[e.property])?"￥"+Number(t[e.property]).toFixed(2):"/"},typeFormatter:function(t,e){return t.type.tname},yearFormatter:function(t,e){var a=this.ageConvert(t.upAge),i=this.ageConvert(t.downAge);return i+"—"+a},ageConvert:function(t){return t/365>0&&t%365==0?t/365+"年":t/365>0&&t%365!==0?t%30==0?t/30+"月":t+"天":t>=30&&t<365&&t%30==0?t/30+"月":t+"天"},handleCurrentChange:function(t){this.currentPage=t,this.getProduct()},getProduct:function(){var t=this;this.$axios({url:"/back/product/getAllProduct",params:{page:this.currentPage}}).then((function(e){200==e.data.code?(t.PageSize=e.data.data.pageSize,t.totalCount=e.data.data.total,t.commodityList=e.data.data.list,setTimeout(t.$openLoading().close(),1e3)):t.$message({type:"error",message:"商品列表获取失败"})}))}},created:function(){this.$openLoading(),this.getTag(),this.getMainImg(),this.getProduct()}},o=s,c=(a("c0ce"),a("2877")),l=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=l.exports},9889:function(t,e,a){"use strict";a("0522")},b680:function(t,e,a){"use strict";var i=a("23e7"),n=a("a691"),r=a("408a"),s=a("1148"),o=a("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},p=function(t,e,a){var i=-1,n=a;while(++i<6)n+=e*t[i],t[i]=n%1e7,n=l(n/1e7)},m=function(t,e){var a=6,i=0;while(--a>=0)i+=t[a],t[a]=l(i/e),i=i%e*1e7},g=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var i=String(t[e]);a=""===a?i:a+s.call("0",7-i.length)+i}return a},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,i,o,c=r(this),l=n(t),f=[0,0,0,0,0,0],h="",y="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,a=e<0?c*u(2,-e,1):c/u(2,e,1),a*=4503599627370496,e=52-e,e>0){p(f,0,a),i=l;while(i>=7)p(f,1e7,0),i-=7;p(f,u(10,i,1),0),i=e-1;while(i>=23)m(f,1<<23),i-=23;m(f,1<<i),p(f,1,1),m(f,2),y=g(f)}else p(f,0,a),p(f,1<<-e,0),y=g(f)+s.call("0",l);return l>0?(o=y.length,y=h+(o<=l?"0."+s.call("0",l-o)+y:y.slice(0,o-l)+"."+y.slice(o-l))):y=h+y,y}})},c0ce:function(t,e,a){"use strict";a("26c1")},ff86:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"card-warpper"},[a("header",{staticClass:"card-header"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))])]),a("div",{staticClass:"card-content"},[t._t("default")],2)])},n=[],r={props:{title:{type:String}}},s=r,o=(a("9889"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-79a42572.eab67686.js.map